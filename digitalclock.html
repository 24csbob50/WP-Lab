<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Alarm Clock</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            font-family: sans-serif;
            transition: background-color 0.5s, color 0.5s;
            background-color: #ffffff;
            color: #333;
            flex-direction: column;
        }

        .container {
            text-align: center;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .clock-container {
            background-color: #e0f7fa;
            color: #00838f;
            border-radius: 50%;
            width: 200px;
            height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .clock-container p{
            margin: 5px;
        }
        .alarm-container {
            background-color: #fff3e0;
            color: #ff9800;
        }

        .stopwatch-container {
            background-color: #e8f5e9;
            color: #4caf50;
            border-radius: 50%;
            width: 200px;
            height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .countdown-container {
            background-color: #fce4ec;
            color: #e91e63;
            border-radius: 50%;
            width: 200px;
            height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .theme-container {
            background-color: #ede7f6;
            color: #673ab7;
        }

        .clockalarm {
            padding: 20px;
        }

        h1 {
            font-size: 2rem;
            color: inherit;
        }

        h3 {
            font-size: 1.0rem;
            color: inherit;
        }

        .timealarm {
            font-size: 2rem;
            margin: 20px 0;
            color: inherit;
        }

        .input-row {
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: center;
        }

        .input-field {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        input[type="date"],
        input[type="time"] {
            padding: 10px;
            font-size: 1rem;
            border: 1px solid #ccc;
            border-radius: 5px;
            width: 100%;
            max-width: 200px;
            color: inherit;
        }

        #setAlarm {
            background-color: #007bff;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s;
        }

        #setAlarm:hover {
            background-color: #0056b3;
        }

        .alarms {
            margin-top: 20px;
            text-align: left;
            color: inherit;
            width: 100%;
        }

        .alarm {
            background-color: #e0e0e0;
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 10px;
            margin: 10px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: fadeIn 0.5s ease-in-out;
            font-size: 14px;
            color: inherit;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .theme-switcher button, .stopwatch button, .countdown button {
            padding: 8px 12px;
            margin: 5px;
            cursor: pointer;
            color: inherit;
        }
        .theme-switcher {
            margin-top: 20px;
        }

        .theme-switcher button {
            padding: 8px 12px;
            margin: 5px;
            cursor: pointer;
        }

        .stopwatch, .countdown {
            margin-top: 20px;
            width: 300px;
        }

        .stopwatch button, .countdown button {
            padding: 8px 12px;
            margin: 5px;
            cursor: pointer;
        }

        .neon {
            text-shadow: 0 0 5px #0f0, 0 0 10px #0f0, 0 0 15px #0f0;
            color: #0f0;
            animation: neon-glow 2s linear infinite alternate;
        }

        @keyframes neon-glow {
            0% { text-shadow: 0 0 5px #0f0, 0 0 10px #0f0, 0 0 15px #0f0; }
            100% { text-shadow: 0 0 2px #0f0, 0 0 5px #0f0, 0 0 8px #0f0; }
        }


        .progress-bar {
            width: 80%;
            background-color: #ddd;
            height: 20px;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px auto;
        }

        .progress-bar div {
            height: 100%;
            background-color: #4CAF50;
            width: 0%;
            transition: width 0.3s ease;
        }

    </style>
</head>
<body>

<div class="container clock-container">
    <p id="demo" style="font-size:2em;"></p>
    <p id="demod"></p>
</div>

<div class="container alarm-container">
    <div class="clockalarm">
        <div class="input-row">
            <div class="input-field">
                <label for="alarmDate">Select Date:</label>
                <input type="date" id="alarmDate" class="alarm-input" min="">
            </div>
            <div class="input-field">
                <label for="alarmTime">Select Time:</label>
                <input type="time" id="alarmTime" class="alarm-input">
            </div>
            <button id="setAlarm">Set Alarm</button>
        </div>
        <div class="alarms" id="alarms"></div>
    </div>
</div>

<div class="container stopwatch-container">
    <div class="stopwatch">
        <div id="stopwatchDisplay">00:00:00</div>
        <button id="startStopwatch">Start</button>
        <button id="pauseStopwatch">Pause</button>
        <button id="resetStopwatch">Reset</button>
    </div>
</div>

<div class="container countdown-container">
    <div class="countdown">
        <input type="number" id="countdownMinutes" placeholder="Minutes">
        <input type="number" id="countdownSeconds" placeholder="Seconds">
        <button id="startCountdown">Start Countdown</button>
        <div class="progress-bar">
            <div id="countdownProgress"></div>
        </div>
    </div>
</div>

<div class="container theme-container">
    <div class="theme-switcher">
        <button data-theme="light">Light</button>
        <button data-theme="dark">Dark</button>
        <button data-theme="neon">Neon</button>
        <button data-theme="custom">Custom</button>
    </div>
</div>

<div id="alertBox" style="display: none;">Alert!</div>

<script>
    setInterval(myTimer, 1000);

    function myTimer() {
        const date = new Date();
        document.getElementById("demo").innerHTML = date.toLocaleTimeString();
        document.getElementById("demod").innerHTML = date.toDateString();
    }

    let time = document.getElementById("timealarm");
    let dateInput = document.getElementById("alarmDate");
    let tInput = document.getElementById("alarmTime");
    let btn = document.getElementById("setAlarm");
    let contan = document.getElementById("alarms");
    let interVal;
    let maxValue = 3;
    let cnt = 0;
    let almTimesArray = [];

    function timeChangeFunction() {
        let curr = new Date();
        let hrs = curr.getHours();
        let min = String(curr.getMinutes()).padStart(2, "0");
        let sec = String(curr.getSeconds()).padStart(2, "02", "0");
        let period = "AM";
        if (hrs >= 12) {
            period = "PM";
            if (hrs > 12) {
                hrs -= 12;
            }
        }
        hrs = String(hrs).padStart(2, "0");
        time.textContent = `${hrs}:${min}:${sec} ${period}`;
    }

    function alarmSetFunction() {
        let now = new Date();
        let selectedDate = new Date(dateInput.value + "T" + tInput.value);
        if (selectedDate <= now) {
            alert(`Invalid time. Please select a future date and time.`);
            return;
        }
        if (almTimesArray.includes(selectedDate.toString())) {
            alert(`You cannot set multiple alarms for the same time.`);
            return;
        }
        if (cnt < maxValue) {
            let timeUntilAlarm = selectedDate - now;
            let alarmDiv = document.createElement("div");
            alarmDiv.classList.add("alarm");
            alarmDiv.innerHTML = `
                <span>${selectedDate.toLocaleString()}</span>
                <button class="delete-alarm">Delete</button>
            `;
            alarmDiv.querySelector(".delete-alarm").addEventListener("click", () => {
                alarmDiv.remove();
                cnt--;
                clearTimeout(interVal);
                const idx = almTimesArray.indexOf(selectedDate.toString());
                if (idx !== -1) {
                    almTimesArray.splice(idx, 1);
                }
            });
            interVal = setTimeout(() => {
                alert("Time to wake up!");
                alarmDiv.remove();
                cnt--;
                const alarmIndex = almTimesArray.indexOf(selectedDate.toString());
                if (alarmIndex !== -1) {
                    almTimesArray.splice(alarmIndex, 1);
                }
            }, timeUntilAlarm);
            contan.appendChild(alarmDiv);
            cnt++;
            almTimesArray.push(selectedDate.toString());
        } else {
            alert("You can only set a maximum of 3 alarms.");
        }
    }

    function showAlarmFunction() {
        let alarms = contan.querySelectorAll(".alarm");
        alarms.forEach((alarm) => {
            let deleteButton = alarm.querySelector(".delete-alarm");
            deleteButton.addEventListener("click", () => {
                alarmDiv.remove();
                cnt--;
                clearTimeout(interVal);
                const alarmIndex = almTimesArray.indexOf(selectedDate.toString());
                if (alarmIndex !== -1) {
                    almTimesArray.splice(alarmIndex, 1);
                }
            });
        });
    }

    showAlarmFunction();
    setInterval(timeChangeFunction, 1000);
    btn.addEventListener("click", alarmSetFunction);
    timeChangeFunction();

    const stopwatchDisplay = document.getElementById('stopwatchDisplay');
    const startStopwatchButton = document.getElementById('startStopwatch');
    const pauseStopwatchButton = document.getElementById('pauseStopwatch');
    const resetStopwatchButton = document.getElementById('resetStopwatch');
    const countdownMinutesInput = document.getElementById('countdownMinutes');
    const countdownSecondsInput = document.getElementById('countdownSeconds');
    const startCountdownButton = document.getElementById('startCountdown');
    const countdownProgress = document.getElementById('countdownProgress');
    const themeButtons = document.querySelectorAll('.theme-switcher button');

    let stopwatchInterval;
    let stopwatchTime = 0;
    let countdownInterval;
    let remainingTime;

    function startStopwatch() {
        if (!stopwatchInterval) {
            let startTime = Date.now() - stopwatchTime;
            stopwatchInterval = setInterval(() => {
                stopwatchTime = Date.now() - startTime;
                updateStopwatchDisplay();
            }, 10);
        }
    }

    function pauseStopwatch() {
        clearInterval(stopwatchInterval);
        stopwatchInterval = null;
    }

    function resetStopwatch() {
        clearInterval(stopwatchInterval);
        stopwatchInterval = null;
        stopwatchTime = 0;
        updateStopwatchDisplay();
    }

    function updateStopwatchDisplay() {
        const time = new Date(stopwatchTime);
        const hours = time.getUTCHours().toString().padStart(2, '0');
        const minutes = time.getUTCMinutes().toString().padStart(2, '0');
        const seconds = time.getUTCSeconds().toString().padStart(2, '0');
        stopwatchDisplay.textContent = `${hours}:${minutes}:${seconds}`;
    }

    startStopwatchButton.addEventListener('click', startStopwatch);
    pauseStopwatchButton.addEventListener('click', pauseStopwatch);
    resetStopwatchButton.addEventListener('click', resetStopwatch);

    function startCountdown() {
        const minutes = parseInt(countdownMinutesInput.value) || 0;
        const seconds = parseInt(countdownSecondsInput.value) || 0;
        remainingTime = minutes * 60 + seconds;

        if (remainingTime > 0) {
            updateCountdownDisplay();
            countdownInterval = setInterval(() => {
                remainingTime--;
                updateCountdownDisplay();
                if (remainingTime <= 0) {
                    clearInterval(countdownInterval);
                    alert('Countdown Finished!');
                }
            }, 1000);
        }
    }

    function updateCountdownDisplay() {
        const minutes = Math.floor(remainingTime / 60);
        const seconds = remainingTime % 60;
        const percentage = (remainingTime / (parseInt(countdownMinutesInput.value) * 60 + parseInt(countdownSecondsInput.value))) * 100;
        countdownProgress.style.width = percentage + '%';
        countdownProgress.style.width = percentage + '%';
    }

    startCountdownButton.addEventListener('click', startCountdown);

    themeButtons.forEach(button => {
        button.addEventListener('click', () => {
            const theme = button.dataset.theme;
            applyTheme(theme);
        });
    });

    function applyTheme(theme) {
        document.body.classList.remove('neon');
        document.body.style.backgroundColor = '';
        document.body.style.color = '';
        if (theme === 'dark') {
            document.body.style.backgroundColor = '#333';
            document.body.style.color = '#f0f0f0';
        } else if (theme === 'neon') {
            document.body.classList.add('neon');
            document.body.style.backgroundColor = '#111';
            document.body.style.color = '#0f0';
        } else if (theme === 'custom') {
           const color = prompt("Enter a background color (e.g., red, #00FF00, rgb(255, 0 ,0))");
           if(color) {
               document.body.style.backgroundColor = color;
               document.body.style.color = 'white';
           }
        }
    }


</script>

</body>
</html>